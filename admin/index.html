<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex" />
  <title>4E - Painel Admin</title>
</head>
<body>
  <script src="https://unpkg.com/decap-cms@3.9.0/dist/decap-cms.js"></script>
  <script>
    // ========================================
    // CARREGAR CSS REAL DO SITE
    // ========================================
    CMS.registerPreviewStyle('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');
    CMS.registerPreviewStyle('/assets/css/style.css');

    // CSS adicional para ajustes do preview
    CMS.registerPreviewStyle(`
      /* Forçar fundo escuro no preview */
      html, body {
        background: #0a0a0a !important;
        color: #fff !important;
        min-height: 100% !important;
      }

      /* Container do preview */
      .cms-preview {
        background: #0a0a0a;
        min-height: 100vh;
        padding: 0;
      }

      /* Ajustes para seções no preview */
      .cms-preview .container {
        max-width: 100%;
        padding: 2rem;
      }

      /* Hero simplificado para preview */
      .cms-preview-hero {
        background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #0a0a0a 100%);
        padding: 4rem 2rem;
        text-align: center;
        position: relative;
      }

      .cms-preview-hero::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 500px;
        height: 500px;
        background: radial-gradient(circle, rgba(125,250,180,0.15) 0%, transparent 70%);
        pointer-events: none;
      }

      /* Section padrão */
      .cms-preview-section {
        padding: 3rem 2rem;
        border-top: 1px solid rgba(255,255,255,0.1);
      }

      /* Cards grid */
      .cms-preview-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1.5rem;
        margin-top: 1.5rem;
      }

      .cms-preview-grid-4 {
        grid-template-columns: repeat(4, 1fr);
      }

      /* Card */
      .cms-preview-card {
        background: rgba(255,255,255,0.03);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 12px;
        padding: 1.5rem;
      }

      /* Logos */
      .cms-preview-logos {
        display: flex;
        gap: 2rem;
        justify-content: center;
        flex-wrap: wrap;
        padding: 2rem;
      }

      .cms-preview-logo-box {
        text-align: center;
        padding: 1.5rem;
        background: rgba(255,255,255,0.03);
        border-radius: 12px;
        min-width: 120px;
      }

      .cms-preview-logo-box.dark {
        background: #1a1a1a;
      }

      .cms-preview-logo-box img {
        max-width: 100px;
        max-height: 80px;
        object-fit: contain;
      }

      /* Info grid */
      .cms-preview-info {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
        margin-top: 1.5rem;
      }

      .cms-preview-info-item {
        padding: 1rem;
        background: rgba(255,255,255,0.03);
        border-radius: 8px;
      }

      /* CTA */
      .cms-preview-cta {
        background: linear-gradient(135deg, rgba(125,250,180,0.1) 0%, rgba(196,181,253,0.1) 50%, rgba(252,211,77,0.1) 100%);
        padding: 3rem 2rem;
        text-align: center;
        border-radius: 16px;
        margin: 2rem;
      }

      /* Pilares */
      .cms-preview-pillar {
        text-align: center;
        padding: 1.5rem 1rem;
      }

      .cms-preview-pillar-letter {
        font-size: 3rem;
        font-weight: 800;
        margin-bottom: 0.5rem;
      }

      /* Cores das áreas */
      .color-gestao-publica { color: #7DFAB4; }
      .color-educacao-privada { color: #C4B5FD; }
      .color-educacao-corporativa { color: #F0ABFC; }
      .color-gestao-crises { color: #FCD34D; }
    `, { raw: true });

    // ========================================
    // PREVIEW: Configurações do Site
    // ========================================
    const SitePreview = createClass({
      render: function() {
        const data = this.props.entry.get('data').toJS();
        const logos = data.logos || {};
        const getAsset = this.props.getAsset;

        return h('div', {className: 'cms-preview'},
          // Hero com título
          h('div', {className: 'cms-preview-hero'},
            h('h1', {className: 'text-gradient', style: {fontSize: '2.5rem', fontWeight: 800}},
              data.title || '4E Consultoria'
            ),
            h('p', {style: {color: 'rgba(255,255,255,0.7)', maxWidth: '600px', margin: '1rem auto'}},
              data.description
            )
          ),

          // Logos
          h('div', {className: 'cms-preview-section'},
            h('span', {className: 'section-label'}, 'Logotipos da Marca'),
            h('div', {className: 'cms-preview-logos'},
              logos.main && h('div', {className: 'cms-preview-logo-box'},
                h('img', {src: getAsset(logos.main).toString()}),
                h('small', {style: {display: 'block', marginTop: '0.5rem', opacity: 0.5}}, 'Principal')
              ),
              logos.white && h('div', {className: 'cms-preview-logo-box dark'},
                h('img', {src: getAsset(logos.white).toString()}),
                h('small', {style: {display: 'block', marginTop: '0.5rem', opacity: 0.5}}, 'Branco')
              ),
              logos.symbol && h('div', {className: 'cms-preview-logo-box'},
                h('img', {src: getAsset(logos.symbol).toString()}),
                h('small', {style: {display: 'block', marginTop: '0.5rem', opacity: 0.5}}, 'Símbolo')
              )
            )
          ),

          // Contato
          h('div', {className: 'cms-preview-section'},
            h('span', {className: 'section-label'}, 'Informações de Contato'),
            h('div', {className: 'cms-preview-info'},
              h('div', {className: 'cms-preview-info-item'},
                h('small', {style: {opacity: 0.5}}, 'E-mail'),
                h('div', {style: {fontWeight: 500}}, data.email)
              ),
              h('div', {className: 'cms-preview-info-item'},
                h('small', {style: {opacity: 0.5}}, 'Telefone'),
                h('div', {style: {fontWeight: 500}}, data.phone)
              ),
              h('div', {className: 'cms-preview-info-item'},
                h('small', {style: {opacity: 0.5}}, 'WhatsApp'),
                h('div', {style: {fontWeight: 500}}, data.whatsapp)
              ),
              h('div', {className: 'cms-preview-info-item'},
                h('small', {style: {opacity: 0.5}}, 'Localização'),
                h('div', {style: {fontWeight: 500}}, data.location)
              )
            )
          )
        );
      }
    });

    // ========================================
    // PREVIEW: Página Sobre
    // ========================================
    const SobrePreview = createClass({
      render: function() {
        const data = this.props.entry.get('data').toJS();
        const hero = data.hero || {};
        const purpose = data.purpose || {};
        const pillars = data.pillars || {};
        const essence = data.essence || {};
        const cta = data.cta || {};

        return h('div', {className: 'cms-preview'},
          // Hero
          h('div', {className: 'cms-preview-hero'},
            h('span', {className: 'section-label'}, hero.label),
            h('h1', {style: {fontSize: '2.5rem', fontWeight: 800},
              dangerouslySetInnerHTML: {__html: (hero.title || '').replace(/text-gradient-animated|text-gradient/g, 'text-gradient')}}
            ),
            h('p', {style: {color: 'rgba(255,255,255,0.7)', maxWidth: '600px', margin: '1rem auto'}}, hero.text)
          ),

          // Propósito
          purpose.title && h('div', {className: 'cms-preview-section'},
            h('span', {className: 'section-label'}, purpose.label),
            h('h2', {style: {fontSize: '1.75rem', marginBottom: '1rem'},
              dangerouslySetInnerHTML: {__html: purpose.title}}
            ),
            (purpose.paragraphs || []).map(function(p, i) {
              return h('p', {key: i, style: {color: 'rgba(255,255,255,0.7)', marginBottom: '1rem'}}, p);
            })
          ),

          // 4 Pilares
          pillars.items && h('div', {className: 'cms-preview-section'},
            h('span', {className: 'section-label'}, pillars.label),
            h('h2', {style: {fontSize: '1.75rem', marginBottom: '1rem'},
              dangerouslySetInnerHTML: {__html: pillars.title}}
            ),
            h('div', {className: 'cms-preview-grid cms-preview-grid-4'},
              pillars.items.map(function(pillar, i) {
                return h('div', {key: i, className: 'cms-preview-card cms-preview-pillar'},
                  h('div', {className: 'cms-preview-pillar-letter color-' + (pillar.color || 'gestao-publica')}, pillar.letter),
                  h('div', {style: {fontWeight: 600, marginBottom: '0.5rem'}}, pillar.name),
                  h('div', {style: {fontSize: '0.875rem', opacity: 0.6}}, pillar.description)
                );
              })
            )
          ),

          // Essência
          essence.items && h('div', {className: 'cms-preview-section'},
            h('span', {className: 'section-label'}, essence.label),
            h('h2', {style: {fontSize: '1.75rem', marginBottom: '1rem'},
              dangerouslySetInnerHTML: {__html: essence.title}}
            ),
            h('div', {className: 'cms-preview-grid'},
              essence.items.map(function(item, i) {
                return h('div', {key: i, className: 'cms-preview-card'},
                  h('div', {style: {fontWeight: 600, marginBottom: '0.5rem'}}, item.title),
                  h('div', {style: {fontSize: '0.875rem', opacity: 0.7}}, item.description)
                );
              })
            )
          ),

          // CTA
          cta.title && h('div', {className: 'cms-preview-cta'},
            h('h2', {style: {fontSize: '1.5rem', marginBottom: '0.75rem'}}, cta.title),
            h('p', {style: {opacity: 0.7, marginBottom: '1.5rem'}}, cta.subtitle),
            h('span', {className: 'btn btn-primary'}, cta.buttonText)
          )
        );
      }
    });

    // ========================================
    // PREVIEW: Hero da Home
    // ========================================
    const HeroPreview = createClass({
      render: function() {
        const data = this.props.entry.get('data').toJS();
        const title = data.title || {};
        const cta = data.cta || {};

        return h('div', {className: 'cms-preview'},
          h('div', {className: 'cms-preview-hero', style: {minHeight: '500px', display: 'flex', flexDirection: 'column', justifyContent: 'center'}},
            data.badge && h('span', {className: 'section-label', style: {marginBottom: '1.5rem'}}, data.badge),
            h('h1', {style: {fontSize: '3rem', fontWeight: 800, lineHeight: 1.2}},
              title.line1 && h('span', {}, title.line1), h('br'),
              title.line2 && h('span', {}, title.line2), h('br'),
              title.line3 && h('span', {className: 'text-gradient'}, title.line3)
            ),
            h('p', {style: {color: 'rgba(255,255,255,0.7)', maxWidth: '600px', margin: '1.5rem auto'}}, data.subtitle),
            h('div', {style: {marginTop: '2rem', display: 'flex', gap: '1rem', justifyContent: 'center'}},
              cta.primary && h('span', {className: 'btn btn-primary btn-lg'}, cta.primary.text),
              cta.secondary && h('span', {className: 'btn btn-secondary btn-lg'}, cta.secondary.text)
            )
          )
        );
      }
    });

    // ========================================
    // PREVIEW: Serviços
    // ========================================
    const ServicesPreview = createClass({
      render: function() {
        const data = this.props.entry.get('data').toJS();
        const services = data.services || [];
        const getAsset = this.props.getAsset;

        return h('div', {className: 'cms-preview'},
          h('div', {className: 'cms-preview-section'},
            h('span', {className: 'section-label'}, 'Nossas Soluções'),
            h('h2', {className: 'text-gradient', style: {fontSize: '2rem', marginBottom: '1.5rem'}}, '4 Áreas de Atuação'),
            h('div', {className: 'cms-preview-grid'},
              services.map(function(service, i) {
                return h('div', {key: i, className: 'cms-preview-card', style: {position: 'relative'}},
                  h('span', {style: {position: 'absolute', top: '1rem', right: '1rem', fontSize: '3rem', fontWeight: 800, opacity: 0.05}}, service.number),
                  service.symbol && h('img', {src: getAsset(service.symbol).toString(), style: {width: '40px', height: '40px', marginBottom: '1rem'}}),
                  h('div', {style: {fontWeight: 600, marginBottom: '0.5rem'}}, service.title),
                  h('div', {style: {fontSize: '0.875rem', opacity: 0.7}}, service.description)
                );
              })
            )
          )
        );
      }
    });

    // ========================================
    // PREVIEW: Páginas de Serviço
    // ========================================
    const ServicePagePreview = createClass({
      render: function() {
        const data = this.props.entry.get('data').toJS();
        const hero = data.hero || {};
        const purpose = data.purpose || {};
        const challenges = data.challenges || {};
        const services = data.services || {};
        const cta = data.cta || {};

        const colorMap = {
          'gestao-publica': '#7DFAB4',
          'educacao-privada': '#C4B5FD',
          'educacao-corporativa': '#F0ABFC',
          'gestao-crises': '#FCD34D'
        };
        const accentColor = colorMap[data.id] || '#7DFAB4';

        return h('div', {className: 'cms-preview'},
          // Hero
          h('div', {className: 'cms-preview-hero'},
            h('h1', {style: {fontSize: '2.5rem', fontWeight: 800},
              dangerouslySetInnerHTML: {__html: (hero.title || data.title || '').replace(/text-gradient/g, 'text-gradient')}}
            ),
            h('p', {style: {color: 'rgba(255,255,255,0.7)', maxWidth: '600px', margin: '1rem auto'}}, hero.subtitle)
          ),

          // Propósito
          purpose.title && h('div', {className: 'cms-preview-section'},
            h('span', {className: 'section-label', style: {color: accentColor}}, purpose.label),
            h('h2', {style: {fontSize: '1.75rem', marginBottom: '1rem'},
              dangerouslySetInnerHTML: {__html: purpose.title}}
            ),
            (purpose.paragraphs || []).map(function(p, i) {
              return h('p', {key: i, style: {color: 'rgba(255,255,255,0.7)', marginBottom: '1rem'}}, p);
            })
          ),

          // Desafios
          challenges.items && h('div', {className: 'cms-preview-section', style: {background: 'rgba(255,255,255,0.02)'}},
            h('span', {className: 'section-label', style: {color: accentColor}}, challenges.label),
            h('h2', {style: {fontSize: '1.75rem', marginBottom: '0.5rem'},
              dangerouslySetInnerHTML: {__html: challenges.title}}
            ),
            h('p', {style: {color: 'rgba(255,255,255,0.7)', marginBottom: '1.5rem'}}, challenges.subtitle),
            h('div', {className: 'cms-preview-grid'},
              challenges.items.map(function(item, i) {
                return h('div', {key: i, className: 'cms-preview-card'},
                  h('div', {style: {fontWeight: 600, marginBottom: '0.5rem'}}, item.title),
                  h('div', {style: {fontSize: '0.875rem', opacity: 0.7}}, item.description)
                );
              })
            )
          ),

          // Serviços
          services.items && h('div', {className: 'cms-preview-section'},
            h('span', {className: 'section-label', style: {color: accentColor}}, services.label),
            h('h2', {style: {fontSize: '1.75rem', marginBottom: '1.5rem'},
              dangerouslySetInnerHTML: {__html: services.title}}
            ),
            h('div', {className: 'cms-preview-grid'},
              services.items.map(function(item, i) {
                return h('div', {key: i, className: 'cms-preview-card'},
                  h('div', {style: {fontWeight: 600, marginBottom: '0.5rem'}}, item.title),
                  h('div', {style: {fontSize: '0.875rem', opacity: 0.7}}, item.description)
                );
              })
            )
          ),

          // CTA
          cta.title && h('div', {className: 'cms-preview-cta'},
            h('h2', {style: {fontSize: '1.5rem', marginBottom: '0.75rem'}}, cta.title),
            h('p', {style: {opacity: 0.7, marginBottom: '1.5rem'}}, cta.subtitle),
            h('span', {className: 'btn btn-primary btn-lg'}, cta.buttonText)
          )
        );
      }
    });

    // ========================================
    // REGISTRAR PREVIEWS
    // ========================================
    CMS.registerPreviewTemplate('site', SitePreview);
    CMS.registerPreviewTemplate('sobre', SobrePreview);
    CMS.registerPreviewTemplate('hero', HeroPreview);
    CMS.registerPreviewTemplate('services', ServicesPreview);
    CMS.registerPreviewTemplate('gestao-publica', ServicePagePreview);
    CMS.registerPreviewTemplate('educacao-privada', ServicePagePreview);
    CMS.registerPreviewTemplate('educacao-corporativa', ServicePagePreview);
    CMS.registerPreviewTemplate('gestao-crises', ServicePagePreview);
  </script>
</body>
</html>
